# go-play

A playground repository for building and learning backend systems with Go, focusing on clean architecture, type-safe database interactions, and robust configuration management.

## üèó Architecture

The project follows a layered architectural pattern to achieve decoupling and facilitate testing:

* **Handler Layer**: Manages HTTP transport logic, request decoding, and response encoding.
* **Service Layer**: Encapsulates business logic, such as password hashing and coordinating between the handler and the store.
* **Store (Repository) Layer**: Handles direct data persistence and retrieval, abstracting the database implementation.
* **Database (sqlc)**: Uses SQLC to generate type-safe Go code from raw SQL queries, ensuring compile-time safety for database operations.

## üõ† Tech Stack

* **Language**: Go 1.25.5.
* **Database**: PostgreSQL with `pgx/v5` for connection pooling and execution.
* **Code Generation**: SQLC for generating type-safe database code.
* **Configuration**: Viper for environment variable management and `.env` file loading.
* **Validation**: `go-playground/validator` for structural request validation.
* **Logging**: Zerolog for high-performance, structured logging.
* **Security**: Bcrypt for secure password hashing and comparison.
* **Live Reload**: Air for hot-reloading during development.

## üìÅ Project Structure

* **`cmd/server/`**: The entry point of the application where the server is initialized and routes are defined.
* **`db/`**: Contains database migrations, SQL queries, and the Go code generated by SQLC.
* **`internal/config/`**: Handles application configuration loading via Viper.
* **`internal/database/`**: Provides database pool initialization logic.
* **`internal/domain/user/`**: Contains the core domain logic for user management, including handlers, services, and models.
* **`internal/middleware/`**: Custom HTTP middlewares, such as a colored console logger.

## üöÄ API Endpoints

The following endpoints are implemented in the user domain:

* `POST /users`: Create a new user with validation.
* `GET /users/{id}`: Retrieve a specific user by ID.
* `GET /users`: List all registered users.
* `DELETE /users/{id}`: Remove a user by ID.
* `GET /login`: Authenticate a user and return their profile.

## ‚öôÔ∏è Getting Started

### Prerequisites

* Go (v1.25.5 or higher).
* PostgreSQL database.
* [Air](https://github.com/air-verse/air) for live reloading (optional).

### Setup

1. **Clone the repository**.
2. **Configure Environment**: Create a `.env` file in the root directory with your database connection string:
```env
DATABASE_URL=postgres://username:password@localhost:5432/database_name

```


3. **Run Migrations**: Apply the schema located in `db/migrations/userSchema.sql` to your database.
4. **Install Dependencies**:
```bash
go mod download

```



### Running the Server

Use **Air** for a live-reloading development experience:

```bash
air

```

Alternatively, run the server directly:

```bash
go run ./cmd/server/main.go

```

The server will start listening on port `8080`.